<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-touch-fullscreen" content="yes">
<meta http-equiv="Access-Control-Allow-Origin" content="*">
<title>换灯行动，拯救冰山</title>
<meta name="keywords" content="" />
<meta name="description" content="" />

<link href="http://cdn.bootcss.com/normalize/5.0.0/normalize.min.css" rel="stylesheet">
<link href="http://cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
<link href="http://cdn.bootcss.com/animate.css/3.5.2/animate.min.css" rel="stylesheet">
<style>

html{
  width: 100%;
  height: 100%;
}

.bg{
  background-size: 100% 100%;
  background: linear-gradient(to bottom, #a3e3f8, #0273bd);
}

.light{
  position: relative;
  width: 100%;
  text-align: center;
  margin-top: 10px;
}
</style>

</head>


<body class="bg" ms-controller="game-control">

<div id="1" ms-click="switch_view('2')" style="display:none">
  <img src="images/cover-min.png" style="width:90%; margin-left:5%; margin-top:40px"/>

  <div style="position: absolute; bottom: 40px; text-align:center; width:100%" class="animated infinite pulse">
    <img src="images/start_btn.png" style=" width: 150px;height: 50px;"/>
  </div>
</div>

<div id="2" style="display:block">
  <img src="images/light_t1-min.png" style="width:80%; margin-left:10%; margin-top:10px"/>
  <div class="light">

    <div style="width:60%; margin-left:20%; background-image:url('images/lightdown-min.png');background-size:100% 100%">
        <div><img src="images/lightup-min.png" width="100%" style="opacity:0.01"></div>
    </div>


    <div id="tap_btn">
    <div ms-if="!tapped" style="text-align:center; margin-top:30px">
      <img src="images/light_btn0-min.png" style=" width: 150px;height: 50px;"/>
    </div>

    <div ms-if="tapped" style="text-align:center; margin-top:30px">
      <img src="images/light_btn1-min.png" style=" width: 150px;height: 50px;"/>
    </div>
    </div>

  </div>

</div>


<script src="http://cdn.bootcss.com/zepto/1.2.0/zepto.min.js"></script>
<!-- <script src="http://cdn.bootcss.com/hammer.js/2.0.8/hammer.min.js"></script> -->
<script src="http://cdn.bootcss.com/avalon.js/1.5.8/avalon.mobile.js"></script>

<script type="text/javascript">
document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);
document.addEventListener('touchstart', function (e) { e.preventDefault(); }, false);

var vm = avalon.define({
    $id: "game-control",
    tapped: false,
    switch_view: function(id){
      $('#1').hide();
      $('#2').hide();
      $('#3').hide();
      $('#'+id).fadeIn();
    },
  });

  // press
    // var el = document.querySelector("#tap_btn");
    // var mc = new Hammer.Manager(el);
    // mc.add(new Hammer.Press());
    // mc.on("press", btn_press);
    // mc.on("pressup", btn_pressup);
    //
    // // function btn_press()
    // // {
    // //   vm.tapped = true;
    // // }
    // //
    // // function btn_pressup()
    // // {
    // //   vm.tapped = false;
    // // }

  $("#tap_btn").bind('touchstart',function(e){
    e.preventDefault();
    vm.tapped = true;
  });

  $("#tap_btn").bind('touchend',function(e){
    vm.tapped = false;
  });



</script>

</body>
</html>
