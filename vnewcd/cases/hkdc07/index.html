<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>七月将有大事发生,武林豪杰皆前去揭榜！我正火速赶往中...</title>
    <meta name="keywords" content="决战七月-英雄帖"/>
    <meta name="description" content="决战七月-英雄帖"/>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">  
    <meta name="robots" content="all"/>
    <meta name="copyright" content="决战七月-英雄帖"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"/>
    <meta name="apple-touch-fullscreen" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="author" content="" />
    <meta name="revisit-after"  content="1 days" />
    <meta name="format-detection" content="email=no" />
    <meta name="format-detection" content="telephone=yes" />
    <link href="css/base.css" rel="stylesheet"/>
    <link href="css/animate.css" rel="stylesheet"/>

    <div style="display:none">
      <img src='img/logo.jpg'/>
    </div>

    <style>

    #bg {
      background: url(img/bg.jpg) no-repeat center center fixed;
      -webkit-background-size: cover;
      -moz-background-size: cover;
      -o-background-size: cover;
      background-size: cover;
    }

    .start{
      position: absolute;
      bottom: 10%;
      width: 200px;
      height: 75px;
      left: 50%;
      margin-left: -100px;
      background: url(img/start.png) no-repeat;
      -webkit-background-size: cover;
      -moz-background-size: cover;
      -o-background-size: cover;
      background-size: 100% 100%;
    }

    .question{
      margin-left: 3%;
      margin-top: 10%;
      width: 86%;
    }

    .answer{
      width: 90%;
      margin-left: 5%;
      margin-top: 5%;
      /* height: 80px; */
      overflow: hidden;
      background-image: url(img/bgtext.png);
      background-size: contain;
      /* background-image: url('bgimage.gif'); */
      background-repeat: no-repeat;
      /* background-attachment: fixed; */
      background-position: bottom center;
      padding-bottom: 30px;
    }

    .answer2{
      width: 90%;
      margin-left: 5%;
      margin-top: 5%;
      /* height: 80px; */
      overflow: hidden;
    }

    .item2{
      width: 80%;
      margin-left: 20%;
      margin-top: 7%;
    }

    .item{
      float: left;
      width: 33.3%;
      padding: 10px;
    }

    .item3{
      width: 70%;
      margin-left: 15%;
      margin-top: 4%;
    }

    .date{
      position: absolute;
      bottom: 20px;
      width: 290px;
      height: 23px;
      left: 50%;
      margin-left: -145px;
      background: url(img/date.png) no-repeat;
      -webkit-background-size: cover;
      -moz-background-size: cover;
      -o-background-size: cover;
      background-size: 100% 100%;
    }

    .rtext{
      margin-top: 10%;
      width: 60%;
      margin-left: 20%;
    }

    .rbutton{
      margin-top: 5%;
      width: 30%;
      margin-left: 35%;
    }

    .rbutton_layer{
      margin-top: 5%;
      width: 80%;
      margin-left: 10%;
    }

    .rbutton_share{
      float: left;
      width: 49.99%;
      padding: 10px;
    }

    .rbutton_again{
      float: left;
      width: 49.99%;
      padding: 10px;
    }

    .ptext{
      margin-top: 10%;
      width: 60%;
      margin-left: 20%;
    }

    .info{
      width: 80%;
          margin-left: 10%;
          overflow: hidden;
          background-image: url(img/bgtext.png);
          background-size: 100%;
          /* background-image: url('bgimage.gif'); */
          background-repeat: no-repeat;
          /* background-attachment: fixed; */
          /* background-position: bottom center; */
          padding-top: 10px;
          padding-bottom: 10px;
          padding-left: 50px;
    }

    .info input{
      border: none;
      outline: none;
      color:white;
      font-size: 18px;
      float: left;
      width: 65%;
      background-color: transparent;
    }

    .info select{
      border: none;
      outline: none;
      color:white;
      font-size: 18px;
      float: left;
      width: 65%;
      background-color: transparent;
    }

    .info label{
      color:white;
      font-size: 18px;
      font-weight: bold;
      float: left;
      width: 35%;
    }

    .finish{
    margin-top: 10%;
    width: 100%;
    /* left: 50%; */
    text-align: center;
    clear: both;
    }

    .friend {
        position: absolute;
        right: 25px;
        top: 20px;
        /* width: 100%; */
        /* text-align: center; */
    }

    #pageShare {
    position: fixed;
    background: rgba(0, 0, 0, 0.6);
    left: 50%;
    top: 0;
    width: 100rem;
    margin-left: -50rem;
    z-index: 10001;
  }
  .modal .transparent {
      background: rgba(0, 0, 0, 0.9);
  }

  .modal.active {
      transition-timing-function: cubic-bezier(0.1, 0.5, 0.1, 1);
  }

  .modal.transparent {
      background-color: rgba(0, 0, 0, 0.8);
  }

  .modal.active {
      height: 100%;
      opacity: 1;
      transition: -webkit-transform .3s;
      transition: transform .3s;
      transition: transform .3s, -webkit-transform .3s;
      -webkit-transform: translate3d(0, 0, 0);
      transform: translate3d(0, 0, 0);
  }

  .modal {
      transition-timing-function: cubic-bezier(0.1, 0.5, 0.1, 1);
  }

  .modal {
      position: fixed;
      top: 0;
      z-index: 11;
      width: 100%;
      min-height: 100%;
      overflow: hidden;
      background-color: #fff;
      opacity: 0;
      transition: opacity 1ms .3s, -webkit-transform .3s;
      transition: transform .3s, opacity 1ms .3s;
      transition: transform .3s, opacity 1ms .3s, -webkit-transform .3s;
      -webkit-transform: translate3d(0, 100%, 0);
      transform: translate3d(0, 100%, 0);
  }

    .loading {
        background: rgba(0,0,0,0.9);
        background-size: cover;
        z-index: 1000;
    }

    .page, .float {
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
    }

    .loading .container {
      width: 100%;
      position: relative;
      top: 50%;
      -webkit-transform: translateY(-50%);
    }

    .loading .bian {
      position: absolute;
      width: 10.4%;
      left: 60%;
      top: -40%;
      display: none;
  }

  .loading .per {
      font-size: 20px;
      text-align: center;
      color:white;
  }

  .animated2 {
    -webkit-animation-duration: 2s;
    animation-duration: 2s;
    -webkit-animation-fill-mode: both;
    animation-fill-mode: both;
}

.animated2.infinite {
    -webkit-animation-iteration-count: infinite;
    animation-iteration-count: infinite;
}
  </style>

  <script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "//hm.baidu.com/hm.js?f73807280d5b7bc172efcc6e68e5ef8e";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
  </script>

</head>

<body id="bg" ms-controller='game_controller'>

    <div class="page loading">
  		<div class="container">
        <p style="font-size:28px; text-align:center; color:white">大侠请稍候... </p>
        <br>
  			<p class="per">00%</p>
  		</div>
  	</div>


  <!-- Start Page -->
  <div id='index' style="display:">
    <div class='start animated infinite pulse' ms-on-click='start()'></div>
    <div class='date'></div>
  </div>

  <!-- Question Page -->
  <div id="q1" style="display:none">
    <div class="question"><img src="img/q1.png" width="100%"/></div>
    <div class="answer">
      <div class="item" ms-on-click='result(1)'><img src="img/card1_1.jpg" width="100%"/></div>
      <div class="item" ms-on-click='result(0)'><img src="img/card1_2.jpg" width="100%"/></div>
      <div class="item" ms-on-click='result(0)'><img src="img/card1_3.jpg" width="100%"/></div>
    </div>
  </div>

  <div id="q2" style="display:none">
    <div class="question"><img src="img/q2.png" width="100%"/></div>
    <div class="answer" >
      <div class="item" ms-on-click='result(1)'><img src="img/card2_1.jpg" width="100%"/></div>
      <div class="item" ms-on-click='result(0)'><img src="img/card2_2.jpg" width="100%"/></div>
      <div class="item" ms-on-click='result(0)'><img src="img/card2_3.jpg" width="100%"/></div>
    </div>
  </div>

  <div id="q3" style="display:none">
    <div class="question"><img src="img/q3.png" width="100%"/></div>
    <div class="answer" >
      <div class="item" ms-on-click='result(1)'><img src="img/card3_1.jpg" width="100%"/></div>
      <div class="item" ms-on-click='result(0)'><img src="img/card3_2.jpg" width="100%"/></div>
      <div class="item" ms-on-click='result(0)'><img src="img/card3_3.jpg" width="100%"/></div>
    </div>
  </div>


  <div id="q4" style="display:none">
    <div class="question"><img src="img/q4.png" width="100%"/></div>
    <div class="answer2" >
      <div class="item2" ms-on-click='result(1)'><img src="img/card4_1.png" height="28px"/></div>
      <div class="item2" ms-on-click='result(0)'><img src="img/card4_2.png" height="28px"/></div>
      <div class="item2" ms-on-click='result(0)'><img src="img/card4_3.png" height="28px"/></div>
    </div>
  </div>


  <div id="q5" style="display:none">
    <div class="question"><img src="img/q5.png" width="100%"/></div>
    <div class="answer2">
      <div class="item3" ms-on-click='result(1)'><img src="img/card5_1.png" width="100%"/></div>
      <div class="item3" ms-on-click='result(0)'><img src="img/card5_2.png" width="100%"/></div>
      <div class="item3" ms-on-click='result(0)'><img src="img/card5_3.png" width="100%"/></div>
    </div>
  </div>

  <!--- result page -->
  <div id="r1" style="display:none">
    <div class="rtext"><img src="img/rtext1.png" width="100%"/></div>
    <div class="rbutton  animated infinite pulse" ms-on-click='prize(1)'><img src="img/rbutton.png" width="100%"/></div>
  </div>

  <div id="r2" style="display:none">
    <div class="rtext"><img src="img/rtext2.png" width="100%"/></div>
    <div class="rbutton  animated infinite pulse" ms-on-click='prize(2)'><img src="img/rbutton.png" width="100%"/></div>
  </div>

  <div id="r3" style="display:none">
    <div class="rtext"><img src="img/rtext3.png" width="100%"/></div>
    <div class="rbutton  animated infinite pulse" ms-on-click='prize(3)'><img src="img/rbutton.png" width="100%"/></div>
  </div>

  <div id="r4" style="display:none">
    <div class="rtext"><img src="img/rtext4.png" width="100%"/></div>

    <div class="rbutton_layer">
    <div class="rbutton_share" ms-on-click='share()'><img src="img/rbutton_share.png" width="100%"/></div>
    <div class="rbutton_again" ms-on-click='again()'><img src="img/rbutton_again.png" width="100%"/></div>
    </div>
  </div>

  <!-- prize page-->
  <div id="p1" style="display:none">
    <div class="ptext"><img src="img/ptext1.png" width="100%"/></div>
    <div class="rbutton  animated infinite pulse" ms-on-click='contact(1)'><img src="img/prize.png" width="100%"/></div>
  </div>

  <div id="p2" style="display:none">
    <div class="ptext"><img src="img/ptext2.png" width="100%"/></div>
    <div class="rbutton  animated infinite pulse" ms-on-click='contact(2)'><img src="img/prize.png" width="100%"/></div>
  </div>

  <div id="p3" style="display:none">
    <div class="ptext"><img src="img/ptext3.png" width="100%"/></div>
    <div class="rbutton  animated infinite pulse" ms-on-click='contact(3)'><img src="img/prize.png" width="100%"/></div>
  </div>

  <!-- contact page -->
  <div id="contact" style="display:none">
    <div class="info" style="margin-top:100px">
      <label for="name" >姓名：</label>
      <input type="text" name="name" id="name" ms-duplex="name"></input>
    </div>


    <div class="info" style="margin-top:25px">
      <label for="tel">电话：</label>
      <input type="text" name="tel" id="tel" ms-duplex="tel"></input>
    </div>

    <div class="info" style="margin-top:25px">
      <label for="wechat">微信号:</label>
      <input type="text" name="wechat" id="wechat"  ms-duplex="wechat"></input>
    </div>

    <div class="info" style="margin-top:25px">
      <label for="sex">性别：</label>
      <select name="sex" id="sex" ms-duplex="sex" data-duplex-changed="selectchange">
          <option value="男" selected="true">男</option>
          <option value="女">女</option>
      </select>
    </div>

    <div class="finish" ms-on-click='finish()'><img src="img/submit.png" width="80px"/></div>
  </div>



  <!-- share page -->
  <div id="friend" style="display:none">
    <div class="friend animated2 infinite tada" ms-on-click='friend()'><img src="img/friend.png" width="250px"/></div>
  </div>

  <!-- hidden layer -->
  <div id="pageShare" class="modal transparent active"  ms-on-click='closeShare()' style="display:none">
  </div>




<script src="js/jquery-2.1.4.min.js"></script>
<script src="js/avalon.mobile.min.js"></script>
<script src="js/base.js"></script>
<script src="js/preloadjs-0.4.1.min.js"></script>
<script src="js/loading.js"></script>

<script>

(function(){
    var self = this;

    this.avalon_control = avalon.define("game_controller", function (vm) {
        vm.score = 0;
        vm.current = 1;
        vm.name = '';
        vm.tel='';
        vm.sex='男';
        vm.wechat = '';

        vm.start = function(){
          //score = 0;
          $('#bg').css("background-image", "url(img/bg2.jpg)");
          $('#index').fadeOut();
          $('#q1').fadeIn();
        };

        vm.result = function(e){
          if (parseInt(e) ==  1) {
            vm.score++;
          }

          if (vm.current == 5) {
              $('#q5').hide();
              if (vm.score==5) {
                $('#r1').fadeIn();
              }
              else if(vm.score == 4)
              {
                $('#r2').fadeIn();
              }
              else if(vm.score == 3)
              {
                $('#r3').fadeIn();
              }
              else {
                $('#r4').fadeIn();
              }
          }
          else
          {
            $('#q'+vm.current).hide();
            vm.current++;
            $('#q'+vm.current).fadeIn();
          }
        }

        vm.prize = function(e){
          $('#r1').hide();
          $('#r2').hide();
          $('#r3').hide();
          if (parseInt(e) == 1) {
             vm.level = space_random.int(1, 3);
             $('#p'+vm.level).fadeIn();
          }
          else if(parseInt(e) == 2){
            vm.level = space_random.int(2, 3);
            $('#p'+vm.level).fadeIn();
          }
          else{
            $('#p3').fadeIn();
          }

        }

        vm.again = function(){
          window.location.href = 'index.html';
          return;
        }

        vm.share = function() {
          $('#r4').hide();
          $('#friend').fadeIn();
          $('#bg').css("background-image", "url(img/bg4.jpg)");
          return;
        }

        vm.contact = function(e) {
          $('#p1').hide();
          $('#p2').hide();
          $('#p3').hide();
          $('#bg').css("background-image", "url(img/bg3.jpg)");
          $('#contact').fadeIn();
        }

        vm.finish = function(){

          //Ajax
          if (vm.sex == '' || vm.tel=='' || vm.name=='') {
            alert('资料未填写完善！');
            return;
          }

          var url = 'add_prize.php?timestamp=' + (new Date().getTime());
          var sex = 1;
          if (vm.sex == '女') {
            sex = 0;
          }
          var submit_data = {'name': vm.name, 'tel':vm.tel, 'wechat':vm.wechat, 'sex':sex, 'level':vm.level};
          base_remote_data.ajaxjson(
             url, //url
             function(data){
               if(data.hasOwnProperty('success')){
                     if(data.success == 1){
                         $('#contact').hide();
                         $('#friend').fadeIn();
                         $('#bg').css("background-image", "url(img/bg4.jpg)");
                     }
                     else{
                         alert(data.message);
                     }
                 }
               else {
                 alert('返回值错误!');
               }
           },
           submit_data,
           function()
           {
             alert('网络错误!');
           });

        }

        vm.friend = function(){
          $('#pageShare').fadeIn();
        }

        vm.closeShare = function(){
          $('#pageShare').fadeOut();
        }



    });
}).call(define('game_space'));


</script>
</body>
</html>
